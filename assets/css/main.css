/* ================== BASE / TOKENS ================== */
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
:root{
  --radius:14px;
  --hero-img:url("assets/images/school.jpg");

  /* Новые переменные для анимаций */
  --anim-slow: 36s;
  --anim-mid: 18s;
  --anim-fast: 8s;

  --orb-1: rgba(31,163,109,.22);
  --orb-2: rgba(56,212,151,.18);
  --orb-3: rgba(26,133,90,.22);
}

/* ===== ТЁМНАЯ (чёрно-золотая) ===== */
:root[data-theme="dark"]{
  --bg:#121212; --bg-2:#1a1a1a; --bg-3:#1f1f1f;
  --fg:#eeeeee; --muted:#aaaaaa; --line:#2b2b2b;
  --accent:#f5c542;
  --accent-08: rgba(245,197,66,.08);
  --accent-12: rgba(245,197,66,.12);
  --accent-18: rgba(245,197,66,.18);
  --accent-28: rgba(245,197,66,.28);
  --shadow:0 10px 30px rgba(0,0,0,.6);
  --title-bright:#ffd766; --title-bright-2:#fff3b3;
}

/* ===== ОФИЦИАЛЬНАЯ (Emerald – темнее ~15%) ===== */
:root[data-theme="emerald"]{
  --bg:#D9E8E1;
  --bg-2:#FFFFFF;
  --bg-3:#D3E3DB;
  --fg:#0E1C16;
  --muted:#50635A;
  --line:#C9DDD4;

  --accent:#1FA36D;
  --accent-2:#38D497;
  --accent-08: rgba(31,163,109,.08);
  --accent-12: rgba(31,163,109,.12);
  --accent-18: rgba(31,163,109,.18);
  --accent-28: rgba(31,163,109,.28);
  --shadow:0 18px 44px rgba(39,112,84,.2);

  --title-bright:#22e39c;
  --title-bright-2:#79f1c5;
}

body{
  font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
  color:var(--fg); line-height:1.6; overflow-x:hidden; background: var(--bg);
}

/* ================== BACKGROUND LAYERS ================== */
/* — Актуализирован: более выразительная «аврора» и мягкие сферические огни — */
.bg-canvas{position:fixed; inset:0; z-index:-3; pointer-events:none}

/* Главные «ленты-авроры» */
:root[data-theme="emerald"] .bg-canvas::before,
:root[data-theme="emerald"] .bg-canvas::after{
  content:""; position:absolute; inset:-30%;
  /* Используем смесь conic + radial для живых переливов */
  background:
    conic-gradient(from 210deg at 30% 40%,
      rgba(31,163,109,.0) 0 12%,
      rgba(31,163,109,.35) 18%,
      rgba(56,212,151,.25) 28%,
      rgba(26,133,90,.35) 40%,
      rgba(26,133,90,.0) 52%),
    conic-gradient(from -15deg at 70% 60%,
      rgba(56,212,151,.0) 0 10%,
      rgba(56,212,151,.28) 18%,
      rgba(31,163,109,.22) 30%,
      rgba(31,163,109,.0) 46%),
    radial-gradient(700px 520px at 18% 20%, rgba(31,163,109,.22), transparent 60%),
    radial-gradient(780px 560px at 82% 18%, rgba(87,207,153,.18), transparent 62%),
    radial-gradient(860px 620px at 20% 86%, rgba(105,196,157,.20), transparent 64%),
    radial-gradient(820px 580px at 86% 84%, rgba(26,133,90,.22), transparent 66%);
  filter: blur(90px) saturate(1.05);
  opacity:.85;
  animation:
    aurora-rotate var(--anim-slow) linear infinite,
    aurora-pan var(--anim-mid) ease-in-out infinite;
}
:root[data-theme="emerald"] .bg-canvas::after{
  opacity:.55; filter: blur(120px) saturate(1.05);
  animation:
    aurora-rotate-rev calc(var(--anim-slow) * 1.2) linear infinite,
    aurora-pan-rev calc(var(--anim-mid) * 1.15) ease-in-out infinite;
}

/* Тонкие «звёздочки» в узоре — теперь медленно плывут */
.bg-pattern, .bg-noise{position:fixed; inset:0; z-index:-2; pointer-events:none}
:root[data-theme="emerald"] .bg-pattern{
  opacity:.20;
  background-image:url('data:image/svg+xml;utf8,\
    <svg xmlns="http://www.w3.org/2000/svg" width="180" height="180" viewBox="0 0 180 180">\
      <g fill="none" stroke="%2333b184" stroke-opacity=".35" stroke-width="1.1">\
        <path d="M0 90 Q45 45 90 90 T180 90" />\
        <path d="M0 135 Q45 90 90 135 T180 135" />\
        <path d="M0 45 Q45 0 90 45 T180 45" />\
      </g>\
      <g fill="%2333b184" fill-opacity=".12">\
        <circle cx="30" cy="30" r="2"/><circle cx="150" cy="56" r="2"/><circle cx="120" cy="142" r="2"/>\
      </g>\
    </svg>');
  background-size:180px 180px;
  animation: slow-pan var(--anim-slow) linear infinite;
}
.bg-noise{
  z-index:-1; opacity:.07;
  background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="140" height="140"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="2" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity="0.35"/></svg>');
  mix-blend-mode:soft-light;
}

/* Дополнительные «световые шары» через body::before/::after — без HTML правок */
body::before,
body::after{
  content:""; position:fixed; z-index:-2; pointer-events:none; border-radius:50%;
  filter: blur(60px);
}
body::before{
  width:40vmax; height:40vmax; left:-10vmax; top:10vmax; background:var(--orb-1);
  animation: orb-float var(--anim-mid) ease-in-out infinite;
}
body::after{
  width:32vmax; height:32vmax; right:-8vmax; bottom:8vmax; background:var(--orb-2);
  animation: orb-float-2 calc(var(--anim-mid)*1.1) ease-in-out infinite;
}

/* фон для тёмной темы (чуть глубже контраст) */
:root[data-theme="dark"] body{
  background:
    radial-gradient(1200px 600px at 60% -10%, #1a1a1a 0%, transparent 60%),
    radial-gradient(900px 300px at 8% 120%, #151515 0%, transparent 60%),
    radial-gradient(900px 300px at 92% 120%, #151515 0%, transparent 60%),
    #121212;
}

/* ================== HERO ================== */
header.hero{
  position:relative; text-align:center; padding:136px 20px 120px;
  background:var(--bg) center/cover no-repeat;
  background-image:var(--hero-img);
  border-bottom:none;
  /* лёгкий параллакс с помощью background-position анимируемого слоя-подсветки */
  overflow:clip;
}
:root[data-theme="emerald"] header.hero::after{
  content:""; position:absolute; inset:0;
  background:
    linear-gradient(180deg, rgba(0,0,0,.38), rgba(0,0,0,.56)),
    radial-gradient(900px 260px at 50% 86%, var(--accent-12), transparent 60%);
  animation: subtle-glow var(--anim-mid) ease-in-out infinite;
}
:root[data-theme="dark"] header.hero::after{
  content:""; position:absolute; inset:0;
  background:
    linear-gradient(180deg, rgba(0,0,0,.60), rgba(0,0,0,.85)),
    radial-gradient(900px 260px at 50% 86%, var(--accent-12), transparent 60%);
  animation: subtle-glow var(--anim-mid) ease-in-out infinite;
}
header.hero::before{
  content:""; position:absolute; left:50%; bottom:-1px; transform:translateX(-50%);
  width:min(840px,92vw); height:2px; border-radius:999px;
  background:linear-gradient(90deg, transparent, color-mix(in oklab, var(--accent) 85%, white 15%), transparent);
  box-shadow:0 0 14px color-mix(in oklab, var(--accent) 25%, transparent);
}
header .inner{position:relative; z-index:1; max-width:1100px; margin:0 auto}

/* ================== ГЕРБ (PNG) ================== */
.hero-logo{
  display:block;
  margin:0 auto 18px;
  width:399px; height:auto; image-rendering:auto;
  /* едва заметная «дыхательная» анимация для живости */
  animation: breathe 8s ease-in-out infinite;
}
@media (max-width: 1024px){ .hero-logo{ width:280px; } }
@media (max-width: 768px){  .hero-logo{ width:220px; } }
@media (max-width: 480px){  .hero-logo{ width:160px; } }

/* ================== TITLE / SUBTITLE ================== */
.title{
  font-family:'Russo One', Inter, sans-serif;
  font-size:clamp(2.3rem,5.4vw,3.6rem);
  background:linear-gradient(180deg, var(--title-bright-2), var(--title-bright));
  -webkit-background-clip:text; background-clip:text; color:transparent;
  text-shadow:0 2px 0 rgba(0,0,0,.28), 0 0 26px color-mix(in oklab, var(--title-bright) 38%, transparent);
  letter-spacing:.4px;
}
.subtitle{
  margin-top:14px;
  font-family:'Russo One', Inter, sans-serif;
  font-weight:400; letter-spacing:.2px; font-size:clamp(1.05rem,2.1vw,1.35rem);
  color:color-mix(in oklab, var(--title-bright) 72%, #ffffff 28%);
  text-shadow:0 1px 0 rgba(0,0,0,.25), 0 0 20px color-mix(in oklab, var(--title-bright) 28%, transparent);
}

/* ================== TOP NAV ================== */
.topnav{margin-top:26px;display:flex;gap:14px;justify-content:center;flex-wrap:wrap}
.topnav a{
  display:inline-block; padding:10px 18px; border-radius:30px;
  color:var(--accent); text-decoration:none; font-weight:700; letter-spacing:.2px;
  border:1px solid color-mix(in oklab, var(--accent) 35%, var(--line));
  background:linear-gradient(180deg, var(--bg-2), color-mix(in oklab, var(--bg-2) 88%, #000 12%));
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.03), 0 10px 24px rgba(0,0,0,.12);
  position:relative; transition:.25s;
}
.topnav a:hover{
  color:#0e1512; background:linear-gradient(180deg, var(--accent-2), var(--accent));
  box-shadow:0 10px 24px var(--accent-28), 0 0 0 1px color-mix(in oklab, var(--accent) 60%, #000) inset;
}

/* ================== THEME TOGGLE ================== */
.theme-toggle{
  position:fixed; right:16px; top:16px; z-index:60;
  display:inline-flex; align-items:center; gap:8px;
  padding:10px 14px; border-radius:999px; cursor:pointer; user-select:none;
  background:linear-gradient(180deg, var(--bg-2), color-mix(in oklab, var(--bg-2) 86%, #000 14%));
  color:var(--accent);
  border:1px solid color-mix(in oklab, var(--accent) 35%, var(--line));
  box-shadow:0 10px 24px rgba(0,0,0,.15), inset 0 0 0 1px rgba(255,255,255,.03);
  transition:.25s;
}
.theme-toggle .dot{ width:8px; height:8px; border-radius:50%; background:var(--accent); box-shadow:0 0 10px var(--accent-28) }

/* ================== SECTIONS / TITLES ================== */
section{padding:64px 20px}
.container{max-width:1100px;margin:0 auto}
.section-title{
  display:block; text-align:center; margin:0 auto 26px;
  font-size:1.9rem; color:var(--accent); letter-spacing:.2px; position:relative; font-weight:800;
  /* «шайни» на линии снизу */
}
.section-title::before{
  content:""; position:absolute; left:50%; transform:translateX(-50%); top:-14px;
  width:72px; height:6px; border-radius:999px;
  background:linear-gradient(90deg, transparent, var(--accent-2), transparent);
}
.section-title::after{
  content:""; display:block; height:2px; width:min(680px,86vw); margin:12px auto 0;
  background:
    linear-gradient(90deg, transparent, color-mix(in oklab, var(--accent) 45%, white), transparent),
    linear-gradient(90deg, transparent 0%, rgba(255,255,255,.75) 15%, transparent 30%);
  background-size:100% 100%, 180px 100%;
  background-repeat:no-repeat, no-repeat;
  border-radius:999px;
  animation: shine var(--anim-fast) linear infinite;
}

/* ================== CARDS ================== */
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:24px}
.card{
  position:relative; text-align:center; overflow:hidden;
  background:linear-gradient(180deg, var(--bg-2), color-mix(in oklab, var(--bg-2) 88%, #000 12%));
  border:1px solid var(--line); border-radius:var(--radius); padding:24px;
  box-shadow:var(--shadow);
  transition:transform .25s, background .25s, box-shadow .25s, border-color .25s;
}
.card::before{
  content:""; position:absolute; inset:-1px; border-radius:calc(var(--radius) + 2px); z-index:0;
  background: conic-gradient(from 180deg at 50% 50%, transparent 0 55%, var(--accent-18) 60%, transparent 70% 100%);
  filter: blur(14px); opacity:0; transition:.3s; pointer-events:none;
}
.card::after{
  content:""; position:absolute; left:-40%; top:-140%; width:80%; height:300%;
  transform: rotate(18deg); pointer-events:none;
  background:linear-gradient(90deg, transparent, rgba(255,255,255,.14), transparent);
  opacity:0; transition:.35s;
}
.card:hover{
  transform:translateY(-6px);
  background:linear-gradient(180deg, var(--bg-2), color-mix(in oklab, var(--bg-2) 84%, #000 16%));
  border-color:color-mix(in oklab, var(--accent) 28%, var(--line));
  box-shadow:0 20px 44px rgba(39,112,84,.22), 0 0 0 1px color-mix(in oklab, var(--accent) 15%, #000) inset;
}
.card:hover::before{opacity:1}
.card:hover::after{opacity:1; left:120%}

.card h3{margin-bottom:8px; color:var(--accent); font-weight:800}
.card h3 .link-title{
  color:inherit; text-decoration:none; display:inline-block; position:relative; padding:2px 0;
}
.card h3 .link-title::after{
  content:""; position:absolute; left:0; right:0; bottom:-4px; height:2px;
  background:linear-gradient(90deg, transparent, color-mix(in oklab, var(--accent) 60%, white), transparent);
  transform:scaleX(0); transform-origin:left; transition:.25s;
}
.card h3 .link-title:hover::after{ transform:scaleX(1) }

.submenu-card{
  margin-top:12px; background:color-mix(in oklab, var(--bg-3) 92%, #000 8%); border-top:1px solid var(--line); padding:10px 12px;
  display:grid; grid-template-columns:repeat(auto-fit, minmax(160px, 1fr)); gap:10px;
  max-height:0; opacity:0; overflow:hidden;
  transition:max-height .35s ease, opacity .35s ease, filter .35s ease;
  filter:saturate(.9);
  border-bottom-left-radius:10px; border-bottom-right-radius:10px;
}
.card:hover .submenu-card, .card.open .submenu-card{ max-height:1000px; opacity:1; filter:saturate(1) }
.submenu-card a{
  color:var(--accent); text-decoration:none; font-size:.92rem; padding:6px 10px; border-radius:8px;
  border:1px solid transparent; white-space:nowrap; transition:.2s;
  background:linear-gradient(180deg, var(--bg-2), color-mix(in oklab, var(--bg-2) 88%, #000 12%));
}
.submenu-card a:hover{ background:var(--bg-2); border-color:#cfe2d9; box-shadow:0 0 0 1px var(--accent-12) inset }

/* ================== EVENTS ================== */
.event{
  background:linear-gradient(180deg, var(--bg-2), color-mix(in oklab, var(--bg-2) 90%, #000 10%));
  border:1px solid var(--line); border-radius:12px; padding:18px;
  transition:background .25s, border-color .25s, box-shadow .25s;
  box-shadow:0 10px 24px rgba(39,112,84,.12);
}
.event:hover{
  background:linear-gradient(180deg, var(--bg-2), color-mix(in oklab, var(--bg-2) 84%, #000 16%));
  border-color:var(--accent-28);
  box-shadow:0 14px 28px rgba(39,112,84,.18), 0 0 0 1px var(--accent-12) inset;
}
.event small{display:block;color:var(--muted);margin:.15rem 0 .5rem}

/* ================== ABOUT ================== */
.about-list{
  list-style:none; max-width:680px; margin:0 auto;
  border:1px solid var(--line); border-radius:12px; overflow:hidden;
  background:linear-gradient(180deg, var(--bg-2), color-mix(in oklab, var(--bg-2) 90%, #000 10%));
  box-shadow:0 12px 24px rgba(39,112,84,.12);
}
.about-list li{
  display:flex; gap:12px; justify-content:space-between; padding:14px 16px; background:transparent; position:relative;
}
.about-list li:not(:last-child){border-bottom:1px solid var(--line)}
.about-list li::before{
  content:""; position:absolute; left:0; top:0; bottom:0; width:3px;
  background:linear-gradient(180deg, var(--accent-28), transparent);
}

/* ================== BUTTONS ================== */
.btn{
  display:inline-block; padding:10px 16px; border-radius:12px;
  font-weight:800; letter-spacing:.2px; text-decoration:none;
  color:#0e1512; background:linear-gradient(180deg, var(--accent-2), var(--accent));
  border:1px solid color-mix(in oklab, var(--accent) 50%, #0a0a0a);
  box-shadow:0 10px 24px var(--accent-18), inset 0 0 0 1px rgba(255,255,255,.15);
  transition:.25s;
}
.btn:hover{ transform:translateY(-1px); box-shadow:0 14px 28px var(--accent-28), 0 0 0 1px color-mix(in oklab, var(--accent) 35%, #000) inset }

/* ================== FOOTER ================== */
footer{
  background:linear-gradient(180deg, #FFFFFF, var(--bg));
  color:color-mix(in oklab, var(--fg) 70%, #000);
  text-align:center; padding:32px 20px 36px; position:relative;
  border-top:1px solid var(--line);
}
:root[data-theme="dark"] footer{
  background:linear-gradient(180deg,#0f0f0f,#0b0b0b);
  color:#8a8a8a;
  border-top:1px solid rgba(245,197,66,.25);
}
footer::before{
  content:""; position:absolute; left:50%; transform:translateX(-50%); top:0;
  width:min(740px,92vw); height:1px; background:linear-gradient(90deg,transparent,color-mix(in oklab, var(--accent) 55%, white),transparent);
}
footer a{color:var(--accent);text-decoration:none}
footer a:hover{text-decoration:underline}
.credit img{ border-radius:12px; transition:.25s }
.credit:hover img{ filter: drop-shadow(0 0 10px var(--accent-28)) }

/* ================== FX / UTIL ================== */
.fade{opacity:0;transform:translateY(36px);transition:all .8s ease}
.fade.show{opacity:1;transform:translateY(0)}

.dock{position:fixed;right:22px;bottom:22px;display:flex;flex-direction:column;gap:14px;z-index:50}
.dock .group{position:relative}
.fab{
  display:grid; place-items:center; width:58px; height:58px; border-radius:50%; color:var(--accent);
  background:linear-gradient(180deg, var(--bg-2), color-mix(in oklab, var(--bg-2) 86%, #000 14%));
  border:1px solid var(--line); box-shadow:0 16px 40px rgba(39,112,84,.18);
  transition:.2s;
  animation: pulse 3.2s ease-in-out infinite;
}
.fab:hover{ transform:translateY(-2px); border-color:var(--accent-28); box-shadow:0 20px 46px rgba(39,112,84,.22) }
.label{
  position:absolute; right:70px; bottom:8px; background:#000000b3; color:#fff;
  padding:6px 10px; border-radius:10px; font-size:.85rem; border:1px solid #222;
  opacity:0; transform:translateX(10px); pointer-events:none; white-space:nowrap; transition:.2s
}
.group:hover .label{opacity:1;transform:translateX(0)}
@media (max-width:520px){ .label{display:none} }

/* ================== KEYFRAMES ================== */
@keyframes aurora-rotate{
  0%{ transform: rotate(0deg) }
  100%{ transform: rotate(360deg) }
}
@keyframes aurora-rotate-rev{
  0%{ transform: rotate(0deg) }
  100%{ transform: rotate(-360deg) }
}
@keyframes aurora-pan{
  0%,100%{ transform: translate3d(0,0,0) }
  50%{ transform: translate3d(2%, -1%, 0) }
}
@keyframes aurora-pan-rev{
  0%,100%{ transform: translate3d(0,0,0) }
  50%{ transform: translate3d(-2%, 1%, 0) }
}
@keyframes slow-pan{
  0%{ background-position: 0 0 }
  100%{ background-position: 180px 180px }
}
@keyframes subtle-glow{
  0%,100%{ opacity: .95; }
  50%{ opacity: 1; }
}
@keyframes shine{
  0%{ background-position: 0 0, -180px 0 }
  100%{ background-position: 0 0, calc(100% + 180px) 0 }
}
@keyframes breathe{
  0%,100%{ transform: translateY(0) scale(1) }
  50%{ transform: translateY(2px) scale(1.01) }
}
@keyframes pulse{
  0%,100%{ box-shadow:0 16px 40px rgba(39,112,84,.18) }
  50%{ box-shadow:0 18px 44px rgba(39,112,84,.24) }
}
@keyframes orb-float{
  0%,100%{ transform: translate3d(0,0,0) }
  50%{ transform: translate3d(2vw,-1.2vw,0) }
}
@keyframes orb-float-2{
  0%,100%{ transform: translate3d(0,0,0) }
  50%{ transform: translate3d(-1.5vw,1vw,0) }
}

/* ================== REDUCED MOTION ================== */
@media (prefers-reduced-motion: reduce){
  .fade{transition:none}
  .bg-canvas, .bg-pattern{display:none}
  body::before, body::after{display:none}
  .hero-logo, .fab, .section-title::after{animation:none}
}
