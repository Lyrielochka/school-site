<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Наши учителя — 2024/2025</title>
  <link rel="stylesheet" href="assets/css/teachers.css">
</head>
<body>
  <div class="container">
    <button class="back-btn" id="backBtn" aria-label="Назад">
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"/></svg>
      Назад
    </button>
  </div>

  <header class="page container">
    <div class="kicker">Наши учителя</div>
    <h1 class="lh-tight wrap">2024/2025 учебный год</h1>
    <p class="sub">актуально на 01.09.2025</p>
  </header>

  <main class="container grid" id="layoutRoot">
    <!-- Поиск -->
    <section class="searchbar card">
      <div class="body">
        <label class="wrap" for="q">Поиск</label>
        <div class="field" role="search">
          <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
          <input id="q" type="search" placeholder="Фамилия или предмет…" autocomplete="off" />
        </div>
      </div>
    </section>

    <!-- Сайдбар -->
    <aside class="sidebar card">
      <div class="body">
        <div class="menu">
          <h3>Разделы</h3>
          <ul id="subjectMenu"></ul>
        </div>
      </div>
    </aside>

    <!-- Результаты -->
    <section id="results" class="min-0"></section>
  </main>

  <template id="groupTpl">
    <section class="group card">
      <div class="body">
        <div class="title wrap"><span class="text"></span><span class="counter">0</span></div>
        <div class="teachers"></div>
      </div>
    </section>
  </template>

  <template id="teacherTpl">
    <div class="teacher">
      <div class="wrap name"></div>
      <div class="wrap note"></div>
    </div>
  </template>

  <script>
    // ======= данные =======
    const DATA = [
      {subject:'Учителя белорусского языка и литературы', list:[
        'Лапицкая О.В. (заместитель директора по воспитательной работе)',
        'Астапович В.Н.', 'Высоцкая Е.Н.', 'Грибанова Л.А.', 'Саверченко М.А.'
      ]},
      {subject:'Учителя русского языка и литературы', list:[
        'Дубровская В.А.', 'Самбук А.А.', 'Стельмашенко А.Н.', 'Тимошенко А.Г.'
      ]},
      {subject:'Учителя математики', list:[
        'Белько М.В. (директор)', 'Абучина Л.С.', 'Загорцева О.М.', 'Коровкина Л.П.', 'Михаленко О.Б.', 'Мойсеенко И.В.', 'Юрченко Т.А.'
      ]},
      {subject:'Учителя иностранного языка', list:[
        'Адинцова И.В.', 'Буланчикова Т.В.', 'Ерошенко А.Н.', 'Ковалева А.А.', 'Лебедева А.Е.', 'Логвинова И.В.', 'Соколова В.В.'
      ]},
      {subject:'Учителя физики', list:[ 'Герасименко Е.А.', 'Лусс А.В.' ]},
      {subject:'Учителя истории и обществоведения', list:[ 'Лусс Е.А.', 'Подольская А.И.', 'Припутенко И.В.', 'Федянина Е.К.' ]},
      {subject:'Учителя географии', list:[ 'Сенько Т.А. (заместитель директора по учебной работе)', 'Тронина О.М.' ]},
      {subject:'Учителя химии', list:[ 'Гончар М.А.', 'Плешевская В.А.' ]},
      {subject:'Учителя биологии', list:[ 'Козлова Т.В.', 'Силкова Г.В.', 'Битченко В.Д.' ]},
      {subject:'Учителя физической культуры и здоровья', list:[ 'Жук А.С.', 'Менделев И.Д.', 'Панасюк Е.Н.', 'Чернявская Я.Е.' ]},
      {subject:'Учителя трудового обучения', list:[ 'Ермоленко А.Ф.', 'Картузова Е.М.', 'Поцелуенок З.М.' ]},
      {subject:'Учителя информатики', list:[ 'Маховик Ю.Ю.', 'Какаулин Д.В.' ]},
      {subject:'Учителя начальных классов', list:[
        'Аксенова Л.М.','Бирукова Т.А.','Виклюк Н.В.','Ермоленко В.Н.','Желдак Т.А.','Жигар Н.В.','Лебедева Е.В.','Лукашевич Е.И.','Маркина Е.А.','Набиванцева Т.Н.','Осипова В.Ю.','Рай Л.Л.','Санько И.И.','Сидоренко О.Ф.','Сусолкина С.В.','Терешкова Е.Д.','Шевчук С.В.'
      ]},
      {subject:'Педагоги социальные', list:[ 'Хомина М.В. (1 ст.)' ]},
      {subject:'Педагоги-психологи', list:[ 'Джалая Е.В. (1 ст.)', 'Казаченко А.Г. (0,5 ст.)' ]},
      {subject:'Педагоги-организаторы', list:[ 'Липская Е.В. (1 ст.)' ]},
      {subject:'Руководитель по ВПВ', list:[ 'Титов Е.А. (1 ст.)' ]},
      {subject:'Учитель-дефектолог', list:[ 'Баклаженко Т.В.','Демина В.Н.','Ломакина Т.И.' ]},
      {subject:'Учитель музыки', list:[ 'Шустова О.А.' ]},
      {subject:'Воспитатели ГПД', list:[ 'Зеньковец С.В.','Лазовская Е.Г.','Николаенко Ю.В.','Малахова Т. А.','Пиво А.Л.','Таптухина В.И.','Шмагун О.А.','Шуканова В. Н.' ]}
    ];

    // ======= helpers =======
    const q = (sel,root=document)=>root.querySelector(sel);
    const qa = (sel,root=document)=>Array.from(root.querySelectorAll(sel));

    const state = { text:'', subject:null };

    function normalize(s){return s.toLowerCase().replace(/[ё]/g,'е');}

    function renderMenu(){
      const menu = q('#subjectMenu');
      menu.innerHTML='';
      const all = document.createElement('li');
      all.innerHTML = `<a href="#" data-subject="" class="active">Все разделы</a>`;
      menu.appendChild(all);
      DATA.forEach(g=>{
        const li = document.createElement('li');
        li.innerHTML = `<a href="#" data-subject="${g.subject}">${g.subject}</a>`;
        menu.appendChild(li);
      });
      menu.addEventListener('click',e=>{
        const a = e.target.closest('a');
        if(!a) return;
        e.preventDefault();
        state.subject = a.dataset.subject || null;
        qa('#subjectMenu a').forEach(x=>x.classList.remove('active'));
        a.classList.add('active');
        render();
      });
    }

    function render(){
      const root = q('#results');
      root.innerHTML='';

      const groups = DATA
        .filter(g=>!state.subject || g.subject===state.subject)
        .map(g=>{
          const items = g.list.filter(name=>{
            if(!state.text) return true;
            const s = normalize(state.text);
            return normalize(name).includes(s) || normalize(g.subject).includes(s);
          });
          return {...g, list: items};
        })
        .filter(g=>g.list.length>0);

      const gTpl = q('#groupTpl');
      const tTpl = q('#teacherTpl');

      if(groups.length===0){
        const empty = document.createElement('div');
        empty.className='card';
        empty.innerHTML = '<div class="body">Ничего не найдено. Попробуйте изменить запрос.</div>';
        root.appendChild(empty);
      } else {
        groups.forEach(g=>{
          const gNode = gTpl.content.cloneNode(true);
          gNode.querySelector('.text').textContent = g.subject;
          gNode.querySelector('.counter').textContent = g.list.length;
          const holder = gNode.querySelector('.teachers');
          g.list.forEach(n=>{
            const t = tTpl.content.cloneNode(true);
            const m = /^(.*?)(\((.*?)\))?$/.exec(n);
            const name = (m && m[1] ? m[1] : n).trim();
            const note = (m && m[2] ? m[2] : '').trim();
            t.querySelector('.name').textContent = name;
            t.querySelector('.note').textContent = note;
            holder.appendChild(t);
          });
          root.appendChild(gNode);
        });
      }
    }

    // ======= init =======
    renderMenu();
    render();

    q('#q').addEventListener('input', (e)=>{ state.text = e.target.value.trim(); render(); });

    // Кнопка «Назад»: history.back с фоллбеком
    q('#backBtn').addEventListener('click', (e)=>{
      e.preventDefault();
      if (history.length > 1) history.back(); else window.location.href = '/';
    });
  </script>
</body>
</html>
